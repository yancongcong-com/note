桌面云交互

虚拟桌面发放流程：创建，关联虚拟机

ITA ----向HDC检查指定的虚拟机组是否存在---不存在向DB创建

ITA-----VRM创建虚拟机------创建虚拟机任务ID-----根据任务ID查询结果

ITA-----vm虚拟机命名  加域  将虚拟机添加到虚拟机组  用户关联组 -----向更新状态DB

ITA-----VM中写hdc信息  重命名  重启

虚拟机注册流程

开机启动HDA服务

检测注册表中指定的HDC注册表项

选中HDCip

检验ip对应的HDC服务是否可用

获得可用的HDC相应

发送注册请求消息

返回注册相应----注册失败--反复注册---------------------HDC定时将虚拟机注册信息写到数据库

启动心跳，开始心跳

应用注册流程

iTA-----HDC----HDA

ITA------VM应用用户信息

登录 流程--访问WI界面

登录流程 -用户鉴权			TC----用户名密码域 -----vaG--------账号----WI

​					获取虚拟机列表   TC---查询WI--查询桌面列表HDC--桌面列表DB

访问虚拟机流程--预链接   TC--WI--登录信息HDC----查询虚拟机信息BD-----返回虚拟机IP，状态HDC---预链接HDC---向Lincense验证----HDC生成add 令牌和login令牌-------向wi返回登录信息

​       连接---过网关   TC---vag----发送add令牌HDC---返回虚拟机IP，端口-----------vag发送login令牌给VM-----HDA向HDC验证---HDC返回域账号密码

​       连接--不过网关   TC---WI-----login令牌

​									TC------VMlogin令牌-----DHC验证--域账号密码















































































